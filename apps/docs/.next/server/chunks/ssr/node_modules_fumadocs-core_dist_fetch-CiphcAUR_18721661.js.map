{"version":3,"sources":["../../../../../../node_modules/fumadocs-core/src/search/client/fetch.ts"],"sourcesContent":["import type { SortedResult } from '@/search';\n\nexport interface FetchOptions {\n  /**\n   * API route for search endpoint, support absolute URLs.\n   *\n   * @defaultValue '/api/search'\n   */\n  api?: string;\n\n  /**\n   * Filter results with specific tag(s).\n   */\n  tag?: string | string[];\n\n  /**\n   * Filter by locale\n   */\n  locale?: string;\n}\n\nconst cache = new Map<string, SortedResult[]>();\n\nexport async function fetchDocs(\n  query: string,\n  { api = '/api/search', locale, tag }: FetchOptions,\n): Promise<SortedResult[]> {\n  const url = new URL(api, window.location.origin);\n  url.searchParams.set('query', query);\n  if (locale) url.searchParams.set('locale', locale);\n  if (tag) url.searchParams.set('tag', Array.isArray(tag) ? tag.join(',') : tag);\n\n  const key = url.toString();\n  const cached = cache.get(key);\n  if (cached) return cached;\n\n  const res = await fetch(url);\n  if (!res.ok) throw new Error(await res.text());\n  const result = (await res.json()) as SortedResult[];\n  cache.set(key, result);\n  return result;\n}\n"],"names":[],"mappings":"uCAqBA,IAAM,EAAQ,IAAI,EAAZ,EAEN,CAF+C,UAAzC,IAEgB,EACpB,CAAA,CACA,CAAE,MAAM,aAAA,QAAe,CAAA,KAAQ,CAAA,CAAA,EAE/B,AADyB,IACnB,EAAM,IAAI,IAAI,EAAK,OAAO,QAAA,CAAS,MAAA,CAAO,CAChD,EAAI,YAAA,CAAa,GAAA,CAAI,QAAS,GAC1B,GADgC,AACxB,EAAI,EAAJ,UAAI,CAAa,GAAA,CAAI,SAAU,GACvC,GAAK,CADyC,AACzC,CAAI,YAAA,CAAa,GAAA,CAAI,MAAO,MAAM,OAAA,CAAQ,GAAO,CAAH,CAAO,IAAA,CAAK,IAAI,CAAG,GAE1E,CAF8E,GAExE,EAAM,EAAI,QAAA,EAAU,CACpB,EAAS,EAAM,GAAA,CAAI,GACzB,CAD6B,EACzB,EAAQ,KAAA,EAAO,EAEnB,IAAM,EAAM,MAAM,MAAM,GACxB,CAD4B,EACxB,CAAC,EAAI,EAAA,CAAI,MAAM,AAAI,MAAM,MAAM,EAAI,IAAA,EAAM,CAAC,CAC9C,IAAM,EAAU,MAAM,EAAI,IAAA,EAAM,CAEhC,OADA,EAAM,GAAA,CAAI,EAAK,GACR,IADe"}