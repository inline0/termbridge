{"version":3,"sources":["../../../../../../node_modules/fumadocs-core/src/search/index.ts","../../../../../../node_modules/fumadocs-core/src/utils/remove-undefined.ts"],"sourcesContent":["import type { ReactNode } from 'react';\n\nexport interface SortedResult<Content = string> {\n  id: string;\n  url: string;\n  type: 'page' | 'heading' | 'text';\n  content: Content;\n\n  /**\n   * breadcrumbs to be displayed on UI\n   */\n  breadcrumbs?: Content[];\n  contentWithHighlights?: HighlightedText<Content>[];\n}\n\nexport type ReactSortedResult = SortedResult<ReactNode>;\n\nexport interface HighlightedText<Content = string> {\n  type: 'text';\n  content: Content;\n  styles?: {\n    highlight?: boolean;\n  };\n}\n\nfunction escapeRegExp(input: string): string {\n  return input.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\nfunction buildRegexFromQuery(q: string): RegExp | null {\n  const trimmed = q.trim();\n  if (trimmed.length === 0) return null;\n  const terms = Array.from(\n    new Set(\n      trimmed\n        .split(/\\s+/)\n        .map((t) => t.trim())\n        .filter(Boolean),\n    ),\n  );\n  if (terms.length === 0) return null;\n  const escaped = terms.map(escapeRegExp).join('|');\n  return new RegExp(`(${escaped})`, 'gi');\n}\n\nexport function createContentHighlighter(query: string | RegExp) {\n  const regex = typeof query === 'string' ? buildRegexFromQuery(query) : query;\n\n  return {\n    highlight(content: string): HighlightedText[] {\n      if (!regex) return [{ type: 'text', content }];\n      const out: HighlightedText[] = [];\n\n      let i = 0;\n      for (const match of content.matchAll(regex)) {\n        if (i < match.index) {\n          out.push({\n            type: 'text',\n            content: content.substring(i, match.index),\n          });\n        }\n\n        out.push({\n          type: 'text',\n          content: match[0],\n          styles: {\n            highlight: true,\n          },\n        });\n\n        i = match.index + match[0].length;\n      }\n\n      if (i < content.length) {\n        out.push({\n          type: 'text',\n          content: content.substring(i),\n        });\n      }\n\n      return out;\n    },\n  };\n}\n","export function removeUndefined<T extends object>(value: T, deep = false): T {\n  const obj = value as Record<string, unknown>;\n\n  for (const key in obj) {\n    if (obj[key] === undefined) delete obj[key];\n    if (!deep) continue;\n\n    const entry = obj[key];\n\n    if (typeof entry === 'object' && entry !== null) {\n      removeUndefined(entry, deep);\n      continue;\n    }\n\n    if (Array.isArray(entry)) {\n      for (const item of entry) removeUndefined(item, deep);\n    }\n  }\n\n  return value;\n}\n"],"names":[],"mappings":"uCAyBA,SAAS,EAAa,CAAA,EAAuB,AAC3C,OAAO,EAAM,OAAA,CAAQ,sBAAuB,OAAO,CAmBrD,SAAgB,EAAyB,CAAA,EAAwB,AAC/D,IAAM,EAAyB,UAAjB,OAAO,EAjBvB,AAiB4C,SAjBnC,AAAoB,CAAA,EAC3B,AADqD,IAC/C,EAAU,EAAE,IAAA,EAAM,CACxB,GAAuB,EAAG,EAAtB,EAAQ,MAAA,CAAc,OAAO,KACjC,IAAM,EAAQ,MAAM,IAAA,CAClB,IAAI,IACF,EACG,KAAA,CAAM,MAAM,CACZ,GAAA,CAAA,AAAK,GAAM,EAAE,IAAA,EAAM,CAAC,CACpB,MAAA,CAAO,QAAQ,CACnB,CACF,CACD,GAAqB,EAAG,EAApB,EAAM,MAAA,CAAc,OAAO,KAC/B,IAAM,EAAU,EAAM,GAAA,CAAI,GAAc,IAAA,CAAK,IAAI,CACjD,AADuC,OAC5B,AAAJ,OAAW,CAAA,CAAA,EAAI,EAAQ,CAAA,CAAA,CAAI,KAAK,EAIuB,GAAS,EAEvE,CAFoE,KAE7D,CACL,UAAU,CAAA,EACR,AAD4C,GACxC,CAAC,EAAO,IAAA,EAAO,CAAC,CAAE,KAAM,eAAQ,EAAS,CAAC,CAC9C,IAAM,EAAyB,EAAE,CAE7B,EAAI,EACR,IAAK,IAAM,KAAS,EAAQ,QAAA,CAAS,GAC/B,EAAI,CADiC,CAAE,AAC7B,KAAA,CACZ,CAAA,EAAI,IAAA,CAAK,CACP,KAAM,OACN,QAAS,EAAQ,SAAA,CAAU,EAAG,EAAM,KAAA,CAAM,CAC3C,CAAC,CAGJ,EAAI,IAAA,CAAK,CACP,KAAM,OACN,QAAS,CAAA,CAAM,EAAA,CACf,OAAQ,CACN,WAAW,CAAA,CACZ,CACF,CAAC,CAEF,EAAI,EAAM,KAAA,CAAQ,CAAA,CAAM,EAAA,CAAG,MAAA,CAU7B,OAPI,EAAI,EAAQ,MAAA,CACd,CAAA,EAAI,IAAA,CAAK,CACP,KAAM,OACN,QAAS,EAAQ,SAAA,CAAU,EAAE,CAC9B,CAAC,CAGG,GAEV,uDClFH,SAAgB,EAAkC,CAAA,CAAU,GAAO,CAAA,EAAU,AAG3E,IAAK,IAAM,OAAO,AAAK,CAErB,GADiB,KAAA,EAAW,EAAxB,CAAA,CAAI,EAAA,EAAoB,OAAO,CAAA,CAAI,EAAA,CACnC,CAAC,EAAM,GAAA,MAEX,IAAM,EAAQ,AANJ,CAMI,CAAI,EAAA,CAElB,GAAqB,UAAjB,OAAO,GAAgC,OAAV,EAAgB,CAC/C,EAAgB,EAAO,GACvB,EAD4B,OAI9B,GAAI,MAAM,OAAA,CAAQ,GAChB,GADsB,CACtB,AAAK,IAAM,KAAQ,EAAO,EAAgB,EAAM,GAIpD,EAJyD,KAIlD"}